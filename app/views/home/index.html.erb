<!-- Header -->
<nav id="home_nav" class="navbar navbar-inverse">
  <%= image_tag('favicon.png', id: 'brand_img', class: 'img-fluid') %>
  <h3 id="banner_text">Hope Chapel</h3>
</nav>

<div id="bg_container">
  <div id="homeCarousel" class="carousel slide" data-ride="carousel" data-interval="5000">
    <div class="carousel-inner">
      <div class="item active">
        <%= image_tag "bgimg.jpg", class: "d-block img-fluid", alt: "First slide" %>
      </div>
      <div class="item">
        <%= image_tag "group2.jpg", class: "d-block img-fluid", alt: "Second slide" %>
      </div>
      <div class="item">
        <%= image_tag "group3.jpg", class: "d-block img-fluid", alt: "Third slide" %> 
      </div>
    </div>
  </div>

  <div class="container-fluid" id="bottom">
    <div class="row">
      <div class="bottom_row">
        <div class="welcome_text">
          <div class="col-lg-3"></div>
          <li class="col-lg-2 dropup">
            <%= link_to "#", class: "nav_link dropdown-toggle", "data-toggle": "dropdown" do %>
              <h1>Contact<span class="caret"></span></h1>
            <% end %>
            <ul class="dropdown-menu">
              <li>
                <%= link_to "https://www.facebook.com/HopeEnglishService", class: "dropup_link", target: "_blank" do %>
                  <h1>Facebook</h1>
                <% end %>
              </li>
              <li>
                <%= link_to "#", class: "dropup_link" do %>
                  <h1>Email</h1>
                <% end %>
              </li>
              <li>
                <%= link_to home_access_path, class: "dropup_link" do %>
                  <h1>Map</h1>
                <% end %>
              </li>
            </ul>
          </li>

          <div class="col-lg-2">
            <%= link_to messages_path, class: "nav_link" do %>
              <h1>Watch</h1>
            <% end %>
          </div>
          <div class="col-lg-2">
            <%= link_to "#", class: "nav_link" do %>
              <h1>Calendar</h1>
            <% end %>
          </div>
          <div class="col-lg-3"></div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Messages -->
<% first_video_data = getVideoDataFrom(Message.first.link) %>
<div id="homeVideoContainer" class="text-center">
  <h1 class="backgroundHeader" style="color: white;">Messages every week</h1>
  <hr width="75%">
  <div id="videoHeader" width="100%">
    <iframe
      width="80%"
      height="550"
      src='https://www.youtube.com/embed/<%= first_video_data[:id] %>'
      frameborder="0"
      allow="autoplay; encrypted-media"
      allowfullscreen>
    </iframe>
  </div>
</div>


<!-- 
TODO: EnglishかArt Tryのアルバム？的なのがいいかな
      写真をこうしたらいいかな：

      English Service
      O      O      O
      O      O      O
      (divの幅を100%にして)
-->

<!-- Access Map -->
<% str = "\"//maps.google.com/maps/api/js?key=" + ENV['google_api_key'] + "\"" %><%# TODO: Hide %>
<script src=<%= str.html_safe %>></script>
<script src="//cdn.rawgit.com/mahnunchik/markerclustererplus/master/dist/markerclusterer.min.js"></script>

<div id="homeMap" style="width: 100%;">
  <div id="homeMap-inner" class="text-center" style="width: 80%; margin: 0px auto;">
    <h1 class="backgroundHeader">Come and visit! <span class="glyphicon glyphicon-road"></span></h1>
    <hr width="75%">
    <div id="map" width="100%" style='height: 500px;'></div>
  </div>
</div>

<!-- TODO: このコードはaccessと重複してる。assetsに入れるか、home#accessごとを消すか -->
<script>
  handler = Gmaps.build('Google');
  handler.buildMap({ provider: {}, internal: {id: 'map'}}, function(){
    markers = handler.addMarkers([
      {
        "lat": 34.696041,
        "lng": 135.732459,
        // Other stuff like "picture" can be added as well, but I think it's fine how it is now.
        // "infowindow": "JEC ホープチャペル Hope Chapel"
      }
    ]);
    handler.bounds.extendWith(markers);
    handler.fitMapToBounds();
    handler.getMap().setZoom(16);
  });
</script>

<!-- Footer -->
<footer class="footer">
  <div class="container">
    <p class="text-muted">Facebook, Twitter, Youtube</p>
  </div>
</footer>
